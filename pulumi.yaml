name: cdk-converted
runtime: yaml
resources:
  chall-cdk-test-app-dev-bucket83908-e77:
    type: aws-native:s3:Bucket
    properties:
      tags:
        - key: aws-cdk:auto-delete-objects
          value: "true"
  chall-cdk-test-app-dev-bucket-policy-e9-a3008-a:
    type: aws-native:s3:BucketPolicy
    properties:
      bucket: ${chall-cdk-test-app-dev-bucket83908-e77.bucketName}
      policyDocument:
        Statement:
          - Action:
              - s3:DeleteObject*
              - s3:GetBucket*
              - s3:List*
              - s3:PutBucketPolicy
            Effect: Allow
            Principal:
              AWS: ${chall-cdk-test-app-dev-custom-s3-auto-delete-objects-custom-resource-provider-role3-b1-bd092.arn}
            Resource:
              - ${chall-cdk-test-app-dev-bucket83908-e77.arn}
              - fn::join:
                  - ""
                  - - ${chall-cdk-test-app-dev-bucket83908-e77.arn}
                    - /*
        Version: 2012-10-17
  chall-cdk-test-app-dev-custom-s3-auto-delete-objects-custom-resource-provider-role3-b1-bd092:
    type: aws-native:iam:Role
    properties:
      assumeRolePolicyDocument:
        Version: 2012-10-17
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
      managedPolicyArns:
        - arn::iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
  chall-cdk-test-app-dev-custom-s3-auto-delete-objects-custom-resource-provider-handler9-d90184-f:
    type: aws-native:lambda:Function
    properties:
      code:
        s3Bucket: cdk-chall-cdk-staging-616138583583-us-east-2
        s3Key: faa95a81ae7d7373f3e1f242268f904eb748d8d0fdd306e8a6fe515a1905a7d6.zip
      timeout: 900
      memorySize: 128
      handler: index.handler
      role: ${chall-cdk-test-app-dev-custom-s3-auto-delete-objects-custom-resource-provider-role3-b1-bd092.arn}
      runtime: nodejs22.x
      description:
        fn::join:
          - ""
          - - "Lambda function for auto-deleting objects in "
            - ${chall-cdk-test-app-dev-bucket83908-e77.bucketName}
            - " S3 bucket."
    options:
      dependsOn:
        - ${chall-cdk-test-app-dev-custom-s3-auto-delete-objects-custom-resource-provider-role3-b1-bd092}
  chall-cdk-test-app-dev-handler-service-role187-d5-a5-a:
    type: aws-native:iam:Role
    properties:
      assumeRolePolicyDocument:
        Statement:
          - Action: sts:AssumeRole
            Effect: Allow
            Principal:
              Service: lambda.amazonaws.com
        Version: 2012-10-17
      managedPolicyArns:
        - arn::iam::aws:policy/service-role/AWSLambdaBasicExecutionRole
  chall-cdk-test-app-dev-handler-e1533-bd5:
    type: aws-native:lambda:Function
    properties:
      code:
        zipFile: 'export default function handler() { return { statusCode: 200, body: "Hello World" };}'
      handler: index.handler
      role: ${chall-cdk-test-app-dev-handler-service-role187-d5-a5-a.arn}
      runtime: nodejs22.x
    options:
      dependsOn:
        - ${chall-cdk-test-app-dev-handler-service-role187-d5-a5-a}
  chall-cdk-test-app-dev-handler-log-group-e3-fd91-da:
    type: aws-native:logs:LogGroup
    properties:
      logGroupName:
        fn::join:
          - ""
          - - /aws/lambda/
            - ${chall-cdk-test-app-dev-handler-e1533-bd5.functionName}
      retentionInDays: 731
    options:
      protect: true
  chall-cdk-test-app-dev-chall-api48-b32-c1-d:
    type: aws-native:apigatewayv2:Api
    properties:
      name: chall-Api
      protocolType: HTTP
  chall-cdk-test-app-dev-chall-api-default-stage-b9-b75-a7-a:
    type: aws:apigatewayv2/stage:Stage
    properties:
      apiId: ${chall-cdk-test-app-dev-chall-api48-b32-c1-d.apiId}
      autoDeploy: true
      name: $default
  chall-cdk-test-app-dev-chall-api-gethellointegration392349-be:
    type: aws-native:apigatewayv2:Integration
    properties:
      apiId: ${chall-cdk-test-app-dev-chall-api48-b32-c1-d.apiId}
      integrationType: AWS_PROXY
      integrationUri: ${chall-cdk-test-app-dev-handler-e1533-bd5.arn}
      payloadFormatVersion: "2.0"
  chall-cdk-test-app-dev-chall-api-gethellointegration-permission-c1-d77-eab:
    type: aws-native:lambda:Permission
    properties:
      action: lambda:InvokeFunction
      functionName: ${chall-cdk-test-app-dev-handler-e1533-bd5.arn}
      principal: apigateway.amazonaws.com
      sourceArn:
        fn::join:
          - ""
          - - "arn:aws:execute-api:us-east-2:616138583583:"
            - ${chall-cdk-test-app-dev-chall-api48-b32-c1-d.apiId}
            - /*/*/hello
  chall-cdk-test-app-dev-chall-api-gethello-f5-f722-c0:
    type: aws-native:apigatewayv2:Route
    properties:
      apiId: ${chall-cdk-test-app-dev-chall-api48-b32-c1-d.apiId}
      authorizationType: NONE
      routeKey: GET /hello
      target:
        fn::join:
          - ""
          - - integrations/
            - ${chall-cdk-test-app-dev-chall-api-gethellointegration392349-be.integrationId}
